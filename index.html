<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prize Draw ¬∑ Everyone Wins</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background: linear-gradient(145deg, #2b3a4a 0%, #1d2a35 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
            padding: 20px;
        }
        .container {
            max-width: 1300px;
            width: 100%;
            background: rgba(255,255,255,0.06);
            backdrop-filter: blur(8px);
            border-radius: 56px;
            padding: 30px;
            box-shadow: 0 30px 50px rgba(0,0,0,0.6), inset 0 2px 2px rgba(255,255,255,0.1);
            border: 1px solid rgba(255,215,0,0.2);
        }
        .main-panel {
            display: flex;
            gap: 28px;
            flex-wrap: wrap;
        }
        /* left rolling area */
        .left-panel {
            flex: 1.4;
            min-width: 360px;
            background: #0f1a24;
            border-radius: 42px;
            padding: 28px 22px;
            box-shadow: inset 0 -3px 8px #00000055, 0 20px 30px #0000004d;
            border: 1px solid #ffd96655;
            display: flex;
            flex-direction: column;
        }
        .left-panel h2 {
            color: #ffd966;
            font-weight: 500;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-size: 1.4rem;
            margin-left: 12px;
            margin-bottom: 18px;
            text-shadow: 0 2px 5px #00000080;
            border-left: 6px solid #ffb347;
            padding-left: 20px;
        }
        .name-roller {
            background: #091016;
            border-radius: 40px;
            padding: 40px 20px;
            margin-bottom: 30px;
            border: 2px solid #ffd96688;
            box-shadow: 0 0 20px #ffb34740, inset 0 0 10px #000000cc;
        }
        .roller-display {
            background: #1e2c3a;
            border-radius: 60px;
            padding: 35px 20px;
            text-align: center;
            border: 1px solid #f1c232;
            box-shadow: 0 8px 0 #0a121b;
        }
        #rollingName {
            font-size: 3.8rem;
            font-weight: 700;
            color: #fff5d6;
            text-shadow: 0 0 8px #ffb347, 0 4px 10px #000;
            letter-spacing: 2px;
            word-break: break-word;
            line-height: 1.3;
            transition: all 0.08s ease;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-roll {
            background: #f5b042;
            border: none;
            border-bottom: 6px solid #9e601d;
            font-size: 2.4rem;
            font-weight: bold;
            color: #1a2a33;
            padding: 25px 20px;
            border-radius: 60px;
            width: 100%;
            cursor: pointer;
            transition: 0.1s linear;
            text-transform: uppercase;
            letter-spacing: 6px;
            box-shadow: 0 10px 20px #00000070;
            margin-top: 15px;
        }
        .btn-roll:active {
            border-bottom-width: 2px;
            transform: translateY(4px);
            background: #ffa726;
        }
        .btn-roll:disabled {
            opacity: 0.5;
            border-bottom-width: 6px;
            transform: none;
            pointer-events: none;
            filter: grayscale(0.6);
        }
        /* right winners area */
        .right-panel {
            flex: 1;
            min-width: 320px;
            background: #0f1a24e0;
            border-radius: 42px;
            padding: 28px 20px;
            border: 1px solid #e6b42266;
            box-shadow: inset 0 -3px 8px #00000070, 0 20px 30px #0000004d;
            backdrop-filter: blur(4px);
            display: flex;
            flex-direction: column;
        }
        .right-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            border-bottom: 2px dashed #f1c232;
            padding-bottom: 12px;
            margin-bottom: 24px;
            color: #ffd966;
        }
        .right-header h2 {
            font-size: 2rem;
            font-weight: 400;
            letter-spacing: 1px;
        }
        .prize-badge {
            background: #2d424b;
            padding: 8px 18px;
            border-radius: 40px;
            font-size: 1.3rem;
            font-weight: 600;
            color: #ffdb8e;
            box-shadow: inset 0 -2px 0 #1a2129;
        }
        .winners-list {
            flex: 1;
            list-style: none;
            overflow-y: auto;
            max-height: 580px;
            padding-right: 8px;
        }
        .winners-list li {
            background: #1d2f3b;
            margin: 10px 0;
            padding: 16px 22px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 1px solid #d4a259;
            box-shadow: 0 4px 0 #0f1a1f;
            font-size: 1.35rem;
            color: #fbe6b0;
            transition: 0.2s;
        }
        .prize-tag {
            background: #c28d3b;
            color: #0b0f14;
            font-weight: 700;
            padding: 5px 18px;
            border-radius: 40px;
            font-size: 1.3rem;
            box-shadow: inset 0 -2px 0 #6d4f2a;
            border: 1px solid #fad27a;
            margin-right: 6px;
        }
        .winner-name {
            flex: 1;
            font-weight: 500;
        }
        .empty-winners {
            color: #68747d;
            text-align: center;
            margin-top: 50px;
            font-size: 1.5rem;
            font-style: italic;
            opacity: 0.8;
        }
        .reset-area {
            margin-top: 25px;
            display: flex;
            justify-content: flex-end;
        }
        #resetBtn {
            background: #374952;
            border: none;
            border-bottom: 4px solid #1d2b33;
            color: #e1cd9c;
            font-size: 1.4rem;
            padding: 12px 32px;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.1s;
            letter-spacing: 2px;
        }
        #resetBtn:active {
            border-bottom-width: 1px;
            transform: translateY(3px);
            background: #2f3d47;
        }
        .remaining-count {
            font-size: 1.2rem;
            color: #ffd58c;
            background: #1d2a33;
            border-radius: 30px;
            padding: 8px 22px;
            display: inline-block;
            border: 1px solid #f5b842;
        }
        footer {
            text-align: center;
            color: #a5b9c9;
            margin-top: 20px;
            opacity: 0.7;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="main-panel">
        <!-- left rolling area -->
        <div class="left-panel">
            <h2>üé∞ 2026 Chinese New Year Lucky Draw</h2>
            <div class="name-roller">
                <div class="roller-display">
                    <div id="rollingName">üé≤ Ready</div>
                </div>
            </div>
            <button class="btn-roll" id="rollBtn">‚ñ∂ START ROLL</button>
            <div style="margin-top: 20px; display: flex; justify-content: center;">
                <span class="remaining-count" id="remainingCounter">25 left</span>
            </div>
        </div>

        <!-- right winners list (with prize numbers) -->
        <div class="right-panel">
            <div class="right-header">
                <h2>üèÜ WINNERS ¬∑ PRIZE No.</h2>
                <span class="prize-badge" id="awardCount">0 / 25</span>
            </div>
            <!-- winners list container -->
            <ul class="winners-list" id="winnersList">
                <li class="empty-winners">‚ú® Click draw to roll the lucky one ‚ú®</li>
            </ul>
            <div class="reset-area">
                <button id="resetBtn">‚ü≤ RESET ALL</button>
            </div>
        </div>
    </div>
    <footer>One prize per person ¬∑ No duplicate ¬∑ Everyone covered</footer>
</div>

<script>
    (function() {
        // ---------- original list (25 people) ----------
        const fullNameList = [
            "Ethan Chuu", "Jessie Tew", "Wong Chok Poh", "Victor So", "Lee Lung Chay",
            "Cyril Chan", "Han Lin Maung", "Aung Thant", "Myo Min Naing", "Shirley Tew",
            "Paing Soe", "Wai Phyo", "Albert", "Luna", "Edika",
            "Bunyau", "Terrence", "Ocean Chuu", "Kuan", "Ghan",
            "Ko Gyi", "Zue Hilaing Htoo", "Tun Myint Aung", "Zheng Hui"
        ];  // 24 names, keep as original.
        
        const nameList = [...fullNameList];   // initial not drawn copy
        
        // state
        let availableNames = [...nameList];       // people still not winner
        let winners = [];                          // winners list { name, prizeNo }
        let isRolling = false;                      // rolling state
        let rollInterval = null;                    // interval id
        let currentDisplayName = "üé≤ Ready";     // current displayed name
        
        // DOM elements
        const rollingNameEl = document.getElementById('rollingName');
        const rollBtn = document.getElementById('rollBtn');
        const winnersListEl = document.getElementById('winnersList');
        const remainingCounterEl = document.getElementById('remainingCounter');
        const awardCountEl = document.getElementById('awardCount');
        const resetBtn = document.getElementById('resetBtn');

        // helper: update remaining people display
        function updateRemainingCount() {
            const remain = availableNames.length;
            remainingCounterEl.textContent = `${remain} left`;
            awardCountEl.textContent = `${winners.length} / ${nameList.length}`;
        }

        // render winners list (prize number by draw order)
        function renderWinners() {
            const items = winners.map((winner, index) => {
                // prize number from 1, format: #01, #02...
                const prizeNumber = (index + 1).toString().padStart(2, '0');
                return `<li>
                    <span class="prize-tag">#${prizeNumber}</span>
                    <span class="winner-name">${winner.name}</span>
                </li>`;
            }).join('');
            
            if (winners.length === 0) {
                winnersListEl.innerHTML = '<li class="empty-winners">‚ú® Click draw to roll the lucky one ‚ú®</li>';
            } else {
                winnersListEl.innerHTML = items;
            }
            // scroll list to bottom (show latest winner)
            if (winnersListEl) {
                winnersListEl.scrollTop = winnersListEl.scrollHeight;
            }
            updateRemainingCount();
        }

        // pick a random name from available list (for rolling display)
        function getRandomAvailableName() {
            if (availableNames.length === 0) return "üèÜ Everyone won üèÜ";
            const randomIdx = Math.floor(Math.random() * availableNames.length);
            return availableNames[randomIdx];
        }

        // update rolling display (each frame)
        function updateRollingDisplay() {
            if (availableNames.length === 0) {
                // no one left to draw, show finished
                rollingNameEl.textContent = "üéâ Draw completed üéâ";
                return;
            }
            const randomName = getRandomAvailableName();
            currentDisplayName = randomName;
            rollingNameEl.textContent = randomName;
        }

        // start rolling (set timer)
        function startRolling() {
            if (availableNames.length === 0) {
                // if no remaining names, cannot start rolling
                alert('Everyone already won! Click RESET to draw again.');
                rollBtn.textContent = '‚ñ∂ START ROLL';
                isRolling = false;
                return;
            }
            if (rollInterval) clearInterval(rollInterval);
            // use short interval for fast rolling (approx 70ms)
            rollInterval = setInterval(updateRollingDisplay, 70);
            isRolling = true;
            rollBtn.textContent = '‚èπ STOP DRAW';
        }

        // stop rolling and pick current displayed name as winner
        function stopAndPickWinner() {
            if (rollInterval) {
                clearInterval(rollInterval);
                rollInterval = null;
            }
            isRolling = false;
            rollBtn.textContent = '‚ñ∂ START ROLL';

            // if no one left, cannot pick
            if (availableNames.length === 0) {
                rollingNameEl.textContent = "üéÅ All prizes awarded";
                return;
            }

            // current displayed name currentDisplayName
            let pickedName = currentDisplayName;

            // edge case: if display shows placeholder or invalid (safety)
            if (!pickedName || pickedName.includes('üèÜ') || pickedName.includes('üé≤') || pickedName.includes('üéâ')) {
                // if unexpected, take first from available
                if (availableNames.length > 0) {
                    pickedName = availableNames[0];
                } else {
                    return;
                }
            }

            // ensure pickedName is actually in availableNames
            if (!availableNames.includes(pickedName)) {
                // if not exist (very rare), take first available
                if (availableNames.length > 0) {
                    pickedName = availableNames[0];
                } else {
                    return;
                }
            }

            // remove pickedName from availableNames, add to winners
            const nameIndex = availableNames.indexOf(pickedName);
            if (nameIndex !== -1) {
                availableNames.splice(nameIndex, 1);
                winners.push({ name: pickedName });
            } else {
                // fallback: take first remaining
                if (availableNames.length > 0) {
                    const fallbackName = availableNames[0];
                    availableNames.shift();
                    winners.push({ name: fallbackName });
                    pickedName = fallbackName;
                }
            }

            // update display: show picked name
            rollingNameEl.textContent = pickedName;

            // if no one left after draw, show completion message
            if (availableNames.length === 0) {
                rollingNameEl.textContent = "üèÖ All done üèÖ";
                if (rollInterval) {
                    clearInterval(rollInterval);
                    rollInterval = null;
                }
                isRolling = false;
                rollBtn.textContent = '‚ñ∂ START ROLL';
            }

            // re-render right side list
            renderWinners();
        }

        // handle roll button click: start/stop
        function handleRollClick() {
            // if no remaining people and not rolling, prevent start
            if (availableNames.length === 0 && !isRolling) {
                alert('All prizes have been awarded! Click RESET to start over.');
                return;
            }

            if (isRolling) {
                // currently rolling -> stop (draw)
                stopAndPickWinner();
            } else {
                // stopped -> start rolling (need people)
                if (availableNames.length === 0) {
                    alert('No participants left, please reset.');
                    return;
                }
                startRolling();
            }
        }

        // reset everything (back to initial)
        function resetGame() {
            // stop any rolling
            if (rollInterval) {
                clearInterval(rollInterval);
                rollInterval = null;
            }
            isRolling = false;
            rollBtn.textContent = '‚ñ∂ START ROLL';
            
            // reset lists: available = full list, winners empty
            availableNames = [...nameList];
            winners = [];
            
            // reset display
            currentDisplayName = "üé≤ Ready";
            rollingNameEl.textContent = currentDisplayName;
            
            // re-render empty right list
            renderWinners();
        }

        // initial render + event binding
        function init() {
            renderWinners();
            rollBtn.addEventListener('click', handleRollClick);
            resetBtn.addEventListener('click', resetGame);

            // clean up timer on page unload (good practice)
            window.addEventListener('beforeunload', function() {
                if (rollInterval) clearInterval(rollInterval);
            });
        }

        init();
    })();
</script>
</body>
</html>
